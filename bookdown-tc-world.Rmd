---
title: "Bookdown - Author technical documents"
subtitle: "TC World India 2020"
author: "Saurav Ghosh"
date: "`r Sys.Date()`"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

# whoami

.pull-right[![Me](saurav.png)]

--

- I am a Content and community manager at Adobe, Bangalore. I look after content and community initiatives for Adobe's server and eLearning suite of products.

--

- I am interested R stats, data science, NLP, Text analytics, and predictive modeling of text. I am a founder member of Bengaluru R Users' Group (BRUG).

--

- Get in touch with me!

--

    - [GitHub repo of this session](https://github.com/sauravg94)
    - [Twitter](https://twitter.com/sauravg94)
    - [LinkedIn](https://www.linkedin.com/in/saurav-ghosh-1311214/)

---

# What is bookdown

--

- An open-source package to write books and scientific documents with R Markdown.

--

- Can handle multiple outputs- PDF, LaTeX, HTML, EPUB, and Word.

--

- Supports dynamic graphics and interactive applications (HTML widgets, d3js, plotly, etc.).

--

- Supports a wide range of languages: R, C/C++, Python, Fortran, Julia, Shell scripts, and SQL, etc.

--

- Can be published to GitHub, Netlify, or any web server or hosting service.

--

- Automated CI/CD pipelining and deployment, for example, Travis CI or Netlify.

---

# Maps

```{r echo=FALSE,warning=FALSE,message=FALSE}
library(sf)
library(leaflet)
library(tidyverse)
library(gapminder)
# Obtained maps from http://www.naturalearthdata.com/downloads/50m-cultural-vectors/
# download.file(
#     url = "http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/50m/cultural/ne_50m_admin_0_countries.zip",
#     destfile = "map/world-shape-files.zip")
# 
# unzip("map/world-shape-files.zip", 
#       exdir = "map/world-shape-files")

world_shapefiles <- read_sf(dsn = "map/world-shape-files")

world_shapefiles<-
    world_shapefiles %>% 
    rename(name=NAME)
#world_shapefiles %>% pull(name)

gapminder_most_recent <- gapminder %>%
    mutate_if(is.factor, as.character) %>%
    filter(year == max(year)) %>%
    select(-continent, -year) %>%
    rename(name = country)

gapminder_world <- world_shapefiles %>%
    left_join(gapminder_most_recent)

# creae continent palette
continent_palette<-colorFactor("Dark2",unique(gapminder_world$CONTINENT))

# create life exp palete

#quantile
life_exp_palette_quantile<-colorQuantile("Blues",
                                         domain = gapminder_world$lifeExp)
# bin
life_exp_palette_bin<-colorBin("YlOrRd",
                               domain = gapminder_world$lifeExp)

gapminder_world %>% 
    leaflet(width = 800,height = 500) %>% 
    addProviderTiles(providers$OpenStreetMap) %>% 
    addPolygons(weight = 1,
                color = ~life_exp_palette_bin(lifeExp),
                label = ~name,
                stroke = FALSE,
                fillOpacity = 1
    ) %>% 
    addLegend(pal = life_exp_palette_bin,
              values = ~lifeExp,
              opacity = 1,
              title = "Life Expectancy")


```

---

# Maps...

```{r echo=FALSE,warning=FALSE,message=FALSE}
library(leaflet)
leaflet(height=450,width=700) %>% 
  addTiles(urlTemplate='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png') %>%
  #addProviderTiles(providers$Esri.NatGeoWorldMap) %>%
  addMarkers(lat=13.01948,lng=77.5842721,popup="Four Seasons Hotel") %>%
  setView(lat=13.01948,lng=77.5842721,zoom=15)
```

---

# Interactive tables

```{r echo=FALSE,warning=FALSE,message=FALSE}
library(DT)
datatable(diamonds[1:50,1:6],options=list(pageLength=5))
```


---

# Interactive heatmaps

```{r echo=FALSE,warning=FALSE,message=FALSE}
library(d3heatmap)
#url <- "http://datasets.flowingdata.com/ppg2008.csv"
nba_players <- read.csv("ppg2008.csv", row.names = 1)
d3heatmap(nba_players, scale = "column",width = 900,height = 600,dendrogram = "none")
```

---

# Interactive scatter plot

```{r echo=FALSE,warning=FALSE,message=FALSE}
library(highcharter)
diamonds %>% 
    sample_n(500) %>% 
    hchart("scatter",hcaes(x="carat",y="price",group="cut")) %>% 
    hc_xAxis(title=list(text="Carat"),crosshair=TRUE) %>% 
    hc_yAxis(title=list("Price"),crosshair=TRUE) %>% 
    hc_chart(zoomType="xy",inverted=FALSE) %>%
    hc_legend(verticalAlign="top",align="right") %>% 
    hc_size(height=350)
```

---

# Interactive time series

```{r echo=FALSE,warning=FALSE,message=FALSE}
library(dygraphs)
lungDeaths <- cbind(ldeaths, mdeaths, fdeaths)
dygraph(lungDeaths,main="Deaths from Lung Disease (UK)",width = 600) %>%
  dyOptions(colors=c("#66C2A5","#FC8D62","#8DA0CB"))
```

---

# Caption a table

```{r echo=FALSE,warning=FALSE,message=FALSE}
library(kableExtra)
library(tidyverse)
knitr::kable(
    head(diamonds,10),
    caption = "Diamonds data set"
)

```

---

# Usage

--

- A typical **bookdown** book contains multiple chapters, and one chapter lives in one R Markdown file, with the filename extension `.Rmd`.

--

- Each R Markdown file must start immediately with the chapter title using the first-level heading, e.g., `# Chapter Title`.

--

- All R Markdown files must be encoded in **UTF-8**.

---

# Installation pre-requisites

Download the latest versions. Download **R** and the free version of **R Studio Desktop**.

- [R](https://cran.r-project.org/bin/windows/base/)
- [R Studio](https://rstudio.com/products/rstudio/download/)

--

R is a programming language and free software environment for statistical computing and graphics supported by the R Foundation for Statistical Computing. The R language is widely used among statisticians and data miners for developing statistical software and data analysis.

--

[R programming language](https://bit.ly/2PRXc9n)

RStudio is a set of integrated tools designed to help you be more productive with R. It includes a console, syntax-highlighting editor that supports direct code execution, and a variety of robust tools for plotting, viewing history, debugging and managing your workspace.

---

# Create a Bookdown project

**File**>**New Project**>**New Directory**>**Book Project using bookdown**

![New Bookdown project](bookdown-new-proj.png)

---

# index.Rmd

- YAML file.
- Equivalent to `index.html`
- Default index file when you view the finished output

```
--- 
title: "Bookdown demo"
author: "Saurav Ghosh"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
documentclass: book
bibliography: [book.bib, packages.bib]
biblio-style: apalike
link-citations: yes
description: "Brief description....."
---
```
---

name: headers
class: middle

## .center[.fancy[Numbered Chapters (default)]]

.pull-left[
`index.Rmd`
```{r eval = FALSE}
# Prerequisites
This is a _sample_ book written in **Markdown**. 
```
<hr>
`01-intro.Rmd`
```{r eval = FALSE}
# Introduction
Blah blah blah.
```
<hr>
`02-literature.Rmd`
```{r eval = FALSE}
# Literature
Here is a review of existing methods.
```

]

.pull-right[
### Chapter 1  Prerequisites

This is a _sample_ book written in **Markdown**. 
<hr>
### Chapter 2  Introduction

Blah blah blah.
<hr>
### Chapter 3  Literature

Here is a review of existing methods.
]

---
class: middle
name: headers-manip

## .center[.fancy[Un-numbered Chapters]]

.pull-left[
`index.Rmd`
```{r eval = FALSE}
# Prerequisites {-} #<<
This is a _sample_ book written in **Markdown**. 
```
<hr>
`01-intro.Rmd`
```{r eval = FALSE}
# Introduction 
Blah blah blah.
```
<hr>
`02-literature.Rmd`
```{r eval = FALSE}
# Literature
Here is a review of existing methods.
```

]

.pull-right[
### Prerequisites

This is a _sample_ book written in **Markdown**. 
<hr>
### Chapter 1  Introduction

Blah blah blah.
<hr>
### Chapter 2  Literature

Here is a review of existing methods.
]

---

class: middle
name: headers-cross

## .center[.fancy[Label & Cross-Reference Chapters/Subchapters]]

.pull-left[
`index.Rmd`
```{r eval = FALSE}
# Prerequisites {-#pre} 
This is a _sample_ book written in **Markdown**. 
```
<hr>
`01-intro.Rmd`
```{r eval = FALSE}
# Introduction {#intro}
Next we review the [literature](#lit)... #<<
```
<hr>
`02-literature.Rmd`
```{r eval = FALSE}
# Literature {#lit}
Following Chapter \@ref(intro),... #<<
```

]

.pull-right[
### Prerequisites

This is a _sample_ book written in **Markdown**. 
<hr>
### Chapter 1  Introduction

Next we review the [literature](https://skeleton-bookdown.netlify.com/literature.html)...
<hr>
### Chapter 2  Literature

Following Chapter [1](https://skeleton-bookdown.netlify.com/intro.html),...
]

---

# Chapters and Sub-chapters

.pull-left[
`index.Rmd`
```{r eval = FALSE}
# Prerequisites
This is a _sample_ book written in **Markdown**. 
```
`01-intro.Rmd`
```{r eval = FALSE}
# Introduction
Blah blah blah.
```

`02-literature.Rmd`
```{r eval = FALSE}
# Literature
Here is a review of existing methods.
```

]

.pull-right[
.center[
```{r echo = FALSE, out.width='65%'}
knitr::include_graphics("bookdown-toc-1.png")
```
    ]
]

---

# Parts

.pull-left[
`index.Rmd`
```{r eval = FALSE}
# Prerequisites {-}
```
`01-intro.Rmd`
```{r eval = FALSE}
# (PART) Part one {-}  #<<
# Introduction
```

`02-literature.Rmd`
```{r eval = FALSE}
# Literature
```

`03-methods.Rmd`
```{r eval = FALSE}
# (PART) Part two {-}  #<<
# Methods
```

]

.pull-right[
.center[
```{r echo = FALSE, out.width='70%'}
knitr::include_graphics("bookdown_toc_2.png")
```
    ]
]

---

# Un-numbered parts

.pull-left[
`index.Rmd`
```{r eval = FALSE}
# Prerequisites {-}
```
`01-intro.Rmd`
```{r eval = FALSE}
# (PART\*) Part one {-} #<<
# Introduction
```

`02-literature.Rmd`
```{r eval = FALSE}
# Literature
```

`03-methods.Rmd`
```{r eval = FALSE}
# (PART\*) Part two {-}  #<<
# Methods
```

]

.pull-right[
.center[
```{r echo = FALSE, out.width='70%'}
knitr::include_graphics("bookdown-toc_3.png")
```
    ]
]

---

# TOC Sidebar

```{r eval=FALSE}
bookdown::gitbook:
  css: style.css
  config:
    toc:
      collapse: section # section,subsection,none
      scroll_highlight: yes
      before: |
        <li><a href="https://tcworld-india.com/">TC World India</a></li>
      after: |
        <li><a href="https://github.com/sauravg94" target="blank">Conference demo repo</a></li>
    download: ["pdf", "epub"]

```
---

# Recap

--

- Parts with # (PART) My unique part {-}

--

- Un-numbered parts with # (PART\*) My unique part {-}

--

- Appendix with # (APPENDIX) My appendix {-}

--

- Collapsing TOC with the _output.yml

